{% extends "base_generic.html" %}

{% block content %}
   <h1>Author: {{ author.full_name }} </h1>

   <p>
      {{author.date_of_birth}} - 
      {% if author.date_of_death %}{{author.date_of_death}}{% endif %}
   </p>

   <div class="sublist">
      <h4>Books</h4>
      {% for book in author.book_set.all %}
      <!-- code to iterate across all books of an author -->
         <hr />
         <p>
            <a href="{{ book.get_absolute_url}}"><strong>{{ book.title }}</strong></a>
         </p>
         <p><em>{{ book.summary }}</em></p>
      {% endfor %}
   </div>
{% endblock %}

{% block sidebar %}
   {{ block.super }}

   {% if perms.catelog.change_author or perms.catelog.delete_author %}
      <hr>
      <ul class="sidebar-nav">
         {% if perms.catelog.change_author %}
            <li><a href="{% url 'author-update' author.id %}">Update author</a></li>
         {% endif %}
         {% if not author.book_sel.all or perms.catelog.delete_author %}
            <li><a href="{% url 'author-delete' author.id %}">Delete author</a></li>
         {% endif %}
      </ul>
   {% endif %}

{% endblock %}