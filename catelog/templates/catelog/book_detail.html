{% extends "base_generic.html" %}

{% block content %}

<h1>Title: {{ book.title }}</h1>

<p>
   <strong>Author:</strong> 
   <a href="{{ book.author.get_absolute_url }}">
      {{ book.author }}
   </a>
</p>
<p><strong>Summary:</strong> {{ book.summary }}</p>
<p><strong>ISBM:</strong> {{ book.isbn }}</p>
<p><strong>Language:</strong> {{ book.language }}</p>
<p><strong>Genre:</strong> {{ book.genre.all|join:", " }}</p>

<!-- <div style="margin-left:20px; margin-top:20px"> -->
<div class="sublist">
   <h4>Copies</h4>
   
   {% for copy in book.bookinstance_set.all %}
   <!-- code to iterate across each copy/instance of a book -->
      <hr />
      <p class="{% if copy.status == 'a' %}text-success{% elif copy.status == 'm' %}text-danger{% else %}text-warning{% endif %}">
         {{ copy.get_status_display }}
      </p>
      {% if copy.status != 'a' %}
         <p><strong>Due to be returned:</strong> {{ copy.due_back}}</p>
      {% endif %}
      <p><strong>Imprint:</strong> {{ copy.imprint }}</p>
      <p class="text-muted"><strong>Id:</strong> {{ copy.id }}</p>
      {% comment %} <a href="">Update</a> {% endcomment %}
      {% comment %} <p>type er: {{ copy.id }}</p> {% endcomment %}
      <a href="{% url 'bookinstance-update' copy.id %}">Update</a>
      <a href="{% url 'bookinstance-delete' copy.id %}">Delete</a>
   {% endfor %}
</div>

{% endblock %}

{% block sidebar %}
   {{ block.super }}

   {% if perms.catelog.change_book or perms.catelog.delete_book or perms.catelog.add_bookinstance%}
      <hr>
      <ul class="sidebar-nav">
         <li class="h6">Maintain book</li>
         {% if perms.catelog.change_book %}
            <li><a href="{% url 'book-update' book.id %}">Update book</a></li>
         {% endif %}
         {% if perms.catelog.delete_book %}
            <li><a href="{% url 'book-delete' book.id %}">Delete book</a></li>
         {% endif %}
         {% if perms.catelog.add_bookinstance %}
            <li><a href="{% url 'bookinstance-create' book.id %}">Create copy</a></li>
         {% endif %}
      </ul>
   {% endif %}

{% endblock sidebar %}